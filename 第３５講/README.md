# 第３５講

## 共用サーバーの使用開始

今日からネットにみんなのサイトを公開するために共用サーバーの使い方に慣れていきましょう。まずは共用サーバーの管理画面にログインしましょう。下記のURLに移動してください。

https://cp.kagoya.net/

ログインのための情報は授業で伝えます。次回から使えるように記録しておいてください。

ユーザ名：

パスワード：

今日からこの管理画面でできることについて少しずつ学んでいきたいと思います。

## Webサイト

管理画面の上の「Webサイト」タブにカーソルを当てると、さまざまなオプションが出てきます。一つずつ見ていきましょう。

### サーバー情報

サーバー情報をみると基本情報、PHP情報、Perl情報、そしてその他の情報が表示される表があります。

- 基本情報

ここにはサーバー名とサーバーのIPアドレスが表示されます。前にも少し話しましたが、IPアドレスはインターネット上のサーバーの住所と考えましょう。詳しい説明は少し後にします。

- PHP情報

ここではサーバーに搭載されているPHPのバージョン、そしてPHPに拡張されているパッケージが表示されています。用途によって必要なパッケージが変わってくることがあるので、このように一覧で見れると便利なことがあったりします。

- Perl情報

PerlはPHPと似てるサーバー側のプログラミング言語です。今回のサーバーと授業では使わないけど気になる人は勉強してみてね！

- その他の情報

ここではその他、サーバー運営でよく使われるソフトのバージョン情報が乗っています。今まで使ってきたApacheもしっかり乗ってますね！SQLiteはMySQLの代わりに使えるデータベース管理言語です。OpenSSLはセキュリティのためのツールです。

以上で簡単なサーバーの情報をみることができました。会社によって使用するサーバー管理システムは違いますが、このような内容は最初に把握しておくといいので確認するようにしましょう。

### ドメイン設定

#### セレクトドメイン

今回使用しているサーバーは無料のプランを使用しているため、サーバーを借りているKagoyaが管理しているセレクトドメインを使用できます。

現在のWebサイトのURLは「aidnet-ikishou.kir.jp」らしいです。実際ブラウザでこのサイトに行ってみましょう！

#### 独自ドメイン

会社や個人で本格的なサイトを公開したい時は、独自ドメインを登録することが進められています。みんなも

www.popcorn.kjm.lls 

よりは

www.popcorn.com

という風に.comで終わるサイトのほうが安心して使えると思います。思っていなかったという人はこれからこのサイトのドメイン名に注目して怪しいサイトは避けるようにしましょう。

ここでもう一度インターネットの仕組みと、サイトを入力してから読み込まれるまでの過程を確認しましょう。

- サイトを入力する
- ブラウザがDNSを通じてこのサイトのネームサーバーを探す
- ネームサーバーが入力されたサイトのIPアドレスを検索する
- ブラウザが返されたIPアドレスからサイトをリクエストする
- サーバーが返したファイルをブラウザが表示する

独自ドメインを購入した場合、この過程の細かい設定ができるので、セキュリティや効率化をすることもできます。

### ディスク利用量

これはサーバーの容量を示す場所ですね。大きなデータベースを管理しないと行けないアプリケーションを作った場合、この利用量の管理が大事になってきます。最近のサーバーは容量が大きくて問題はないですが、昔はディスクの容量をわざといっぱいにさせるという攻撃もあったみたいです。

### FTPアクセス

FTPは「File Transfer Protocol」の略で、サーバー間のファイル転送を可能にするものです。先ほどURLに移動してみてわかりましたが、今サーバーは空っぽの状態です。これを解消するために、サイトのデータを送る必要があります。

このFTPは、制限をかけていなければIPアドレスを知っているだけでファイルを転送したり、サーバーからダウンロードすることができてしまいます。これだと外部の人がサイトを編集してしまったり、大事なデータが奪われたりしてしまいます。そのため、基本的に制限をかけておくことが必要です。

僕たちはFTPをできるように設定をしましょう。画面上部に「常時許可」というたぶがあります。これはこのサーバーとのFTPを常時許可するサーバーを指定することができます。今回の授業で使用しているコンピューターを登録しましょう。

「許可ホスト」入力のテキストボックスに自分のコンピューターのIPアドレスを入力してください。備考には「壱岐Windows１」、数字は今日の左からの席順を入力しましょう。

### SSHアクセス

SSHは今までみんなWindowsのマシンから、仮想マシンのLinuxにアクセスするために使ってきた遠隔操作のためのツールです。今回はFTPがあれば間に合うので、ここは何も変更しませんが、もしSSH登録をしたかったらこういう設定も変更できます。

### アクセス制限

社内のサイトなどの場合、特定の人だけがアクセスできるファイルを作ることがあります。そのログインをするためのユーザー管理などをこの画面からすることができます。その後、ディレクトリ制限からこのユーザーではないとみることができないページを指定します。

大事な情報などはこういうディレクトリに入れておくことが大事です。

### WAF設定

WAFは「Web Application Firewall」の略で、このサーバーで実行されているウェブサービスへの攻撃を防ぐ役割をします。

### PHP設定変更

ここではサーバーのPHPのさまざまな設定を行うことができます。スクリプトの実行時間、クッキーの使用、POSTで送信されるデータの最大大きさなどが対象です。

### ログサービス

ここではサーバー内のエラーやFTPの履歴についての記録（ログ）をみることができます。問題が発生した時に、ここでエラー前にどういうことが行われていたかなどを確認できます。

### リソース監視

ここではサーバーのコンピューターの使用状況などをみることができます。

### バージョン管理

ここでは使用するPHPのバージョンを変更することができます。古いサーバーが移行する時などは最新のPHPに対応していない時があったりするので、そういう時に古いのを使うことがあったりします。

## PUTTYのダウンロード

それではFTP用のクライアント、PUTTYというツールをダウンロードしましょう。以下のURLにアクセスしてください。

https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html

次回からこれを使用してサーバーにサイトを移動していきます。


